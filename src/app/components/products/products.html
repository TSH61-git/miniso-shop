<div class="products-page">

  <h2 class="page-title">מוצרים</h2>

  <div *ngIf="authService.isAdmin" class="add-product-wrapper">
    <button class="add-product-btn" (click)="goToAddProduct()">
      ➕ הוספת מוצר
    </button>
    <button class="add-product-btn" style="margin-left:12px;" (click)="goToOrders()">
      📦 הצגת הזמנות
    </button>
  </div>

  <div class="content-wrapper">

    <!-- סינון צד ימין -->
    <aside class="filters-panel">
      <h3>סינון</h3>

      <div class="filter-group">
        <label>חיפוש (תיאור)</label>
        <input [(ngModel)]="desc" />
      </div>

      <div class="filter-group">
        <label>קטגוריה</label>
        <select [(ngModel)]="categoryId">
          <option [ngValue]="0">כל הקטגוריות</option>
          <option *ngFor="let c of categories" [ngValue]="c.categoryId">{{ c.categoryName }}</option>
        </select>
      </div>

      <div class="filter-group">
        <label>מינימום מחיר</label>
        <input type="number" [(ngModel)]="minPrice" />
      </div>

      <div class="filter-group">
        <label>מקסימום מחיר</label>
        <input type="number" [(ngModel)]="maxPrice" />
      </div>

      <button class="filter-btn" (click)="applyFilters()">סנן</button>
    </aside>

    <!-- אזור מוצרים -->
    <section class="products-section">

      <div *ngIf="isLoading" class="state-message">טוען...</div>
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
      <div *ngIf="!isLoading && !errorMessage && products.length === 0" class="state-message">
        אין מוצרים להצגה
      </div>

      <div class="products-grid">
        <app-product-card
          *ngFor="let p of products"
          [product]="p">
        </app-product-card>
      </div>

      <!-- Pagination Controls -->
      <div *ngIf="totalItems > skip" class="pagination">
        <button 
          class="pagination-btn" 
          [disabled]="!hasPreviousPage" 
          (click)="goToPreviousPage()">
          ‹ קודם
        </button>

        <span class="pagination-info">
          עמוד {{ currentPage }} מתוך {{ totalPages }} ({{ totalItems }} מוצרים)
        </span>

        <button 
          class="pagination-btn" 
          [disabled]="!hasNextPage" 
          (click)="goToNextPage()">
          הבא ›
        </button>
      </div>

    </section>

  </div>
</div>